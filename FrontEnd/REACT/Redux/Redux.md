# Redux 

<br>

![](../../../img/redux.png)

> Redux는 리액트 생태계에서 사용되는 상태 관리 라이브러리이다. 

## 1. 상태관리 라이브러리의 필요성 
**1. 상태 업데이트 로직의 분리** 

> 복잡한 상태 업데이트 로직을 컴포넌트에서 뜯어낼 수 있고, 이를 모듈화 하여 여러 파일들로 저장해서 보기 좋게 정돈 할수 있다. <br>
> 높은 유지보수성 

**2. 더 쉬운 상태 관리** 

<br>

## 2. 리덕스란 
> 리덕스는 앞서 말한것과 같이 상태관리 라이브러리이다. 리덕스를 사용하게 되면, 컴포넌트들의 상태관련 로직들을 다른 파일들로 분리시켜 더욱 효율적으로 관리 할 수 있다. 또한 컴포넌트끼리 상태를 공유할 때 여러 컴포넌트를 거치지 않고도 손쉽게 상태 값을 전달 할 수 있다는 장점이 있다. 


<br>

## 3. 리덕스 개념 정리 

### 1. 액션(Action) 
> 상태에 어떠한 변화가 필요하게 될 땐, 액션이라는 것을 발생시킨다. 이는 하나의 객체로 표현되는데 액션 객체는 다음과 같은 형식으로 이뤄져 있다. 
> ```
> {
>   type: "TOGGLE_VALUE"
> }
> ```
> 액션은 ```type``` 필드를 필수적으로 가지고 있어야하고 그 외의 값들은 마음대로 넣어줄 수 있다. 
> ```
> {
>   type: "ADD_TODO", 
>   data: {
>       id: 0, 
>       text: "리덕스 배우기"
>   }
> }
> ```

### 2. 액션 생성함수(Action Creator) 
> 액션 생성함수는 액션을 만드는 함수이다. 단순히 파라미터를 받아와 액션 객체 형태로 만들어 준다. 
> ```js
> const changeInput = text => ({
>   type: "CHANGE_INPUT",
>   text
> }) 
> ```

### 3. 리듀서 (Reducer)
> 리듀서는 변화를 일으키는 함수이다. 리듀서는 두가지의 파라미터를 받아온다. 
> ```js
>   function reducer(state, action) {
>       // 상태 업데이트 로직
>       return alteredState;
>   }
> ```
> 리듀서는 현재의 상태와 전달받은 액션을 참고하여 새로운 상태를 만들어서 반환한다. 

### 4. 스토어 (Store)
> 리덕스에서 한 애플리케이션 당 하나의 스토어를 만들게 된다. 스토어 안에는 현재의 앱상태와 리듀서, 몇가지 내장 함수가 들어가 있다. 

### 5. 디스패치 (Dispatch) 
> 디스패치는 스토어의 내장함수 중 하나이다. 
> <br> 디스패치는 액션을 발생시키는 것이라고 이해하면 된다. ```dispatch(action)``` 이런식으로 호출을 하면 스토어는 리듀서 함수를 실행시켜 해당 액션을 처리하는 로직이 있다면 액션을 참고하여 새로운 상태를 만들어 준다. 

### 6. 구독 (Subscribe) 
> 구독 또한 스토어의 내장함수 중 하나이다. 
> <br> subscribe 함수에 특정함수를 전달해주면, 액션이 디스패치 되었을 때마다 전달해준 함수가 호출된다. 

<br>

## 4. 리덕스의 3가지 규칙 
### 1. 하나의 어플리케이션 안에는 하나의 스토어가 있다. 

### 2. 상태는 읽기전용이다. 
> 리액트에서 state를 업데이트 해야 할 때, setState를 사용하고, 배열을 업데이트 해야 할 때는 배열 자체에 push를 직접하지 않고, concat 같은 함수를 사용하여 기존의 배열은 수정하지 않고 새로운 배열을 만들어 교체하는 방식으로 업데이트를 한다. <br>
> 객체를 업데이트를 할때도 마찬가지로, 기존 객체는 건들이지 않고 ```Object.assign```을 사용하거나 spread 연산자를 사용하여 업데이트 한다. 

### 3. 변화를 일으키는 함수, 리듀서는 순수한 함수여야 한다. 
> - 리듀서 함수는 이전 상태와 액션 객체를 파라미터로 받는다. 
> - 이전의 상태는 절대 건들이지 않고, 변화를 일으킨 새로운 상태 객체를 만들어서 반환 
> - 똑같은 파라미터로 호출된 리듀서 함수는 언제나 똑같은 결과값을 반환해야만 한다. 